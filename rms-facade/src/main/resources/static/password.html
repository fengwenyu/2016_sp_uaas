<!DOCTYPE html><html><head>    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />    <meta http-equiv="X-UA-Compatible" content="IE=Edge">    <script type="text/javascript" src="bower_components/jquery/dist/jquery-1.7.2.min.js"></script>    <script type="text/javascript" src="facade/jsonWsdl"></script>    <link href="http://cdn.bootcss.com/bootstrap/3.2.0/css/bootstrap.min.css">    <title>权限系统</title>    <style>        body{background-color:#f4f6f9;}        th, td{text-align:center;}        td{padding:25px 0;}        td a{display:block; width:165px; height:40px; padding:20px 0; margin:0 auto; -webkit-border-radius:5px;	-moz-border-radius:5px;	border-radius:5px; color:#dde5f2; font-size:24px; font-family:Arial, Helvetica, sans-serif; line-height:24px; background-color:#5dadfe; line-height:24px; text-decoration:none;}        td a span{display:block; font-size:12px; font-family:"宋体"; line-height:20px;}        td input.txt{            border:1px solid rgb(217,217,217);            height:22px;            line-height: 22px;            width:200px;            padding:2px 0;            margin-left: 20px;        }        div a{            display: inline-block;            float: right;            font-size: 13px;            color:#444444;            font-weight:bold;            text-decoration:underline;            font-family: "Helvetica Neue",Helvetica,Microsoft Yahei,Hiragino Sans GB,WenQuanYi Micro Hei,sans-serif;        }        .alert{            margin: 0 25%;            text-align: left;            font-size: 14px;            line-height:20px;            font-family: "Helvetica Neue",Helvetica,Microsoft Yahei,Hiragino Sans GB,WenQuanYi Micro Hei,sans-serif;            padding: 8px 35px 8px 14px;            text-shadow:0 1px 0 rgba(255, 255, 255, 0.5);            border-radius:4px;        }        .alert-error{            border:1px solid #eed3d7;            color:#b94a48;            background-color:#f2dede;        }        .alert-success{            border:1px solid #d6e9c6;            color:#468847;            background-color:#dff0d8;        }    </style></head><body><div  style="height:30px;margin-bottom: 20px">    <div style="margin:0 2%;line-height:14px;padding:8px 20px;">        <a style="" href="nav.html">   </a>        <div style="clear: both"></div>    </div></div><table cellspacing="0" cellpadding="0" align="center" width="70%" style="margin-top:50px;">    <tr>        <th colspan="4"><a href="index.html#/userManager"><img src="images/new-version/logoerp.gif" /></a></th>    </tr>    <tr>        <td colspan="4" align="center">            <div class="alert alert-error" style="display: none"></div>            <div class="alert alert-success" style="display: none"></div>            <form method="post" action="">            <table cellspacing="0" cellpadding="0" align="center" width="50%" >                <tr></tr>                <tr>                    <td style="text-align: right">当前密码：</td>                    <td style="text-align: left"><input  class="txt" required type="password" id="old_pwd" name="old_pwd"/></td>                </tr>                <tr>                    <td style="text-align: right">修改密码：</td>                    <td style="text-align: left"><input class="txt" required type="password" name="new_pwd" id="new_pwd"/></td>                </tr>                <tr>                    <td style="text-align: right">密码确认：</td>                    <td style="text-align: left"><input class="txt" required type="password" name="repeat_pwd" id="repeat_pwd"/></td>                </tr>                <tr>                    <td colspan="4">                        <input type="button" name="submit" value="确 定"/>                        <input type="button" name="return" value="返 回"/>                    </td>                </tr>            </table>            </form>        </td>    </tr></table><script type="text/javascript">    jQuery(function(){        var token = getQueryString("token")        var userName = getQueryString("user")        $("input[name='submit']").bind({            click : function(){                var newPwd = $("#new_pwd").val()                var repeatPwd = $("#repeat_pwd").val()                var oldPwd = $("#old_pwd").val()                if(/^\s*$/g.test(oldPwd)){                    $(".alert-error").html("原密码不能为空！").show()                    $(".alert-success").hide()                    return false                }                if(/^\s*$/g.test(newPwd)){                    $(".alert-error").html("新密码不能为空！").show()                    $(".alert-success").hide()                    return false                }                if(/^\s*$/g.test(repeatPwd)){                    $(".alert-error").html("请再次输入新密码！").show()                    $(".alert-success").hide()                    return false                }                if(newPwd != repeatPwd){                    $(".alert-error").html("两次密码输入不一致！").show()                    $(".alert-success").hide()                    return false                }                if(!/^[0-9|a-z|A-Z]+$/g.test(newPwd)){                    $(".alert-error").html("密码只能是数字或字母！").show()                    $(".alert-success").hide()                    return false                }                try{                    var result = com.shangpin.uaas.api.UserFacade.changePassword(token , oldPwd , newPwd)                    console.log(result)                    if(result.code == "0"){                        $(".alert-error").html(result.msg).show()                        $(".alert-success").hide()                    }else{                        $(".alert-error").hide()                        $(".alert-success").html(result.msg).show()                    }                }catch(e){                    $(".alert-error").html(e).show()                    $(".alert-success").hide()                }            }        });        $("input[name='return']").bind({            click : function(){                location.href = "nav.html?token=" + token + "&user=" + userName            }        });    });    function getQueryString(name) {        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");        var r = window.location.search.substr(1).match(reg);        if (r != null) return unescape(r[2]); return null;    }</script></body></html>